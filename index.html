<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Birthday Adventure for [Name] ðŸŽ‰</title>
    <style>
        :root {
            --primary: #ff69b4;
            --secondary: #2d2d2d;
        }

        body {
            background: var(--secondary);
            color: white;
            font-family: 'Arial', sans-serif;
            overflow-x: hidden;
        }

        .game-section {
            display: none;
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            border: 3px solid var(--primary);
            border-radius: 15px;
            position: relative;
        }

        .active-section {
            display: block;
        }

        .puzzle-box {
            background: rgba(0,0,0,0.3);
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 10px;
        }

        #loveLock {
            width: 200px;
            height: 200px;
            margin: 2rem auto;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .memory-timeline {
            display: grid;
            gap: 1rem;
        }

        .timeline-event {
            background: var(--primary);
            padding: 1rem;
            border-radius: 10px;
            opacity: 0;
            transform: translateX(-50px);
            transition: all 1s;
        }

        .confetti {
            position: fixed;
            pointer-events: none;
            animation: confetti 3s linear;
        }

        @keyframes confetti {
            0% { transform: translateY(-100vh) rotate(0deg); }
            100% { transform: translateY(100vh) rotate(360deg); }
        }

        .progress-bar {
            height: 5px;
            background: var(--primary);
            position: fixed;
            top: 0;
            left: 0;
            transition: width 0.5s;
        }
    </style>
</head>
<body>
    <div class="progress-bar" id="progress"></div>

    <!-- Section 0: Password -->
    <div class="game-section active-section" id="section0">
        <h2>ðŸ”’ Enter Our Secret Code</h2>
        <p>Hint: Our anniversary date (DDMMYYYY)</p>
        <input type="number" id="password" placeholder="00000000">
        <button onclick="checkPassword()">Unlock Love</button>
    </div>

    <!-- Section 1: Memory Puzzle -->
    <div class="game-section" id="section1">
        <h2>ðŸ§© Rebuild Our Story</h2>
        <div class="puzzle-box" id="puzzleGrid"></div>
        <p class="hint">Arrange these moments in order</p>
    </div>

    <!-- Section 2: Heart Lock -->
    <div class="game-section" id="section2">
        <h2>ðŸ’– Unlock My Heart</h2>
        <img src="heart-lock.png" id="loveLock" onclick="rotateLock()">
        <p id="lockStatus">Click to rotate â†’ 0Â°</p>
    </div>

    <!-- Section 3: Final Message -->
    <div class="game-section" id="section3">
        <h1>ðŸŽ‰ Happy Birthday, [Name]! ðŸŽ‰</h1>
        <div class="memory-timeline" id="timeline"></div>
        <div id="finalMessage" style="display:none;">
            <p>[Your heartfelt message here]</p>
            <button onclick="createConfetti()">Celebrate!</button>
        </div>
    </div>

    <script>
        // =============== CONFIG =============== //
        const CONFIG = {
            PASSWORD: 15072022, // Change to your anniversary date
            MEMORIES: [
                { date: "First Meet", text: "That rainy day in Paris â˜”", img: "image1.jpg" },
                { date: "First Date", text: "Coffee & awkward laughs â˜•", img: "image2.jpg" },
                { date: "First Kiss", text: "Under the stars ðŸŒ ", img: "image3.jpg" }
            ],
            LOCK_COMBINATION: [35, 145, 270], // Rotation angles to unlock
            FINAL_MESSAGE: "Every moment with you is magic... [personalize]"
        };

        // =============== GAME STATE =============== //
        let currentSection = 0;
        let lockAttempts = [];

        // =============== GAME LOGIC =============== //
        // Password Check
        function checkPassword() {
            if(parseInt(document.getElementById('password').value) === CONFIG.PASSWORD) {
                loadSection(1);
                initializePuzzle();
                updateProgress(25);
            }
        }

        // Memory Puzzle
        function initializePuzzle() {
            const grid = document.getElementById('puzzleGrid');
            CONFIG.MEMORIES.forEach((memory, index) => {
                const card = document.createElement('div');
                card.className = 'timeline-event';
                card.innerHTML = `
                    <h3>${memory.date}</h3>
                    <p>${memory.text}</p>
                    <img src="${memory.img}" style="width:100px">
                `;
                card.dataset.order = index;
                card.draggable = true;
                card.ondragstart = drag;
                card.ondragover = allowDrop;
                card.ondrop = drop;
                grid.appendChild(card);
                setTimeout(() => {
                    card.style.opacity = 1;
                    card.style.transform = 'translateX(0)';
                }, index * 300);
            });
        }

        // Drag & Drop Logic
        function allowDrop(ev) { ev.preventDefault(); }
        function drag(ev) { ev.dataTransfer.setData("text", ev.target.dataset.order); }
        function drop(ev) {
            ev.preventDefault();
            const fromIndex = parseInt(ev.dataTransfer.getData("text"));
            const toIndex = parseInt(ev.target.dataset.order);
            swapMemories(fromIndex, toIndex);
        }

        function swapMemories(from, to) {
            const memories = [...document.querySelectorAll('#puzzleGrid > div')];
            const temp = memories[from].innerHTML;
            memories[from].innerHTML = memories[to].innerHTML;
            memories[to].innerHTML = temp;
            checkPuzzleOrder();
        }

        function checkPuzzleOrder() {
            const currentOrder = [...document.querySelectorAll('#puzzleGrid > div')]
                .map(el => parseInt(el.dataset.order));
            if(currentOrder.every((val, i) => val === i)) {
                loadSection(2);
                updateProgress(50);
            }
        }

        // Heart Lock Mechanism
        let rotation = 0;
        function rotateLock() {
            rotation = (rotation + 35) % 360;
            document.getElementById('loveLock').style.transform = `rotate(${rotation}deg)`;
            document.getElementById('lockStatus').textContent = 
                `Click to rotate â†’ ${rotation}Â°`;
            lockAttempts.push(rotation);
            checkLockCombination();
        }

        function checkLockCombination() {
            if(lockAttempts.slice(-3).join() === CONFIG.LOCK_COMBINATION.join()) {
                loadSection(3);
                showFinalMessage();
                updateProgress(100);
            }
        }

        // Final Message
        function showFinalMessage() {
            const timeline = document.getElementById('timeline');
            CONFIG.MEMORIES.forEach((memory, index) => {
                const event = document.createElement('div');
                event.className = 'timeline-event';
                event.innerHTML = `
                    <h3>${memory.date}</h3>
                    <p>${memory.text}</p>
                `;
                timeline.appendChild(event);
                setTimeout(() => {
                    event.style.opacity = 1;
                    event.style.transform = 'translateX(0)';
                }, index * 500);
            });
            setTimeout(() => {
                document.getElementById('finalMessage').style.display = 'block';
            }, 3000);
        }

        // Progress System
        function updateProgress(percent) {
            document.getElementById('progress').style.width = `${percent}%`;
        }

        // Confetti Effect
        function createConfetti() {
            for(let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.innerHTML = ['ðŸŽ‰', 'ðŸŽŠ', 'ðŸ’–', 'ðŸŒ¸'][Math.floor(Math.random()*4)];
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
        }

        // Section Navigation
        function loadSection(sectionNumber) {
            document.querySelector('.active-section').classList.remove('active-section');
            document.getElementById(`section${sectionNumber}`).classList.add('active-section');
        }
    </script>
</body>
</html>
